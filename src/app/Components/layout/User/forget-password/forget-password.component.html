@if(!isShowingVerify || isResetPassword) {
<div class="d-flex justify-content-center">
  <div class="forget-password">

    @if (isResetPassword) {
    <div class="title">
      <h4>Reset your Password</h4>
    </div>
    <form class="d-flex flex-column gap-3 w-100" [formGroup]="resetPasswordForm" (submit)="onResetPasswordSubmit()">
      <div>
        <input class="w-100" formControlName="password" type="password" placeholder="Password">
        @if(resetPasswordForm.controls.password.hasError('required') && resetPasswordForm.controls.password.dirty &&
        !resetPasswordForm.controls.password.untouched ){
        <div class="error mt-1">Password is Required</div>
        }
        @else if (resetPasswordForm.controls.password.hasError('minlength') && resetPasswordForm.controls.password.dirty
        && !resetPasswordForm.controls.password.untouched) {
        <div class="error mt-1">be at least be 8 characters long</div>
        }
        @else if (!resetPasswordForm.controls.password.value?.match('^(?=.*[a-z])') &&
        resetPasswordForm.controls.password.dirty && !resetPasswordForm.controls.password.untouched)
        {
        <div class="error mt-1">include at least be 1 lowercase characters long</div>
        }
        @else if (!resetPasswordForm.controls.password.value?.match('^(?=.*[A-Z])') &&
        resetPasswordForm.controls.password.dirty && !resetPasswordForm.controls.password.untouched)
        {
        <div class="error mt-1">include at least be 1 uppercase characters long</div>
        }
        @else if (!resetPasswordForm.controls.password.value?.match('^(?=.*[0-9])') &&
        resetPasswordForm.controls.password.dirty && !resetPasswordForm.controls.password.untouched)
        {
        <div class="error mt-1">include at least be 1 number characters long</div>
        }
        @else if (!resetPasswordForm.controls.password.value?.match('^(?=.*[!@#$%^&*.?])') &&
        resetPasswordForm.controls.password.dirty &&
        !resetPasswordForm.controls.password.untouched)
        {
        <div class="error mt-1">include at least be 1 symbol characters long</div>
        }
      </div>
      <div>
        <input class="w-100" formControlName="confirmPassword" type="password" placeholder="Confirm Password">
        @if(resetPasswordForm.controls.confirmPassword.hasError('required') &&
        resetPasswordForm.controls.confirmPassword.dirty && resetPasswordForm.controls.confirmPassword.touched ){
        <div class="error mt-1">Confirm Password is Required</div>
        }
        @if(resetPasswordForm.controls.confirmPassword.hasError('passwordsDoNotMatch') &&
        resetPasswordForm.controls.confirmPassword.dirty && resetPasswordForm.controls.confirmPassword.touched ){
        <div class="error mt-1">Password don't match</div>
        }
      </div>
      @if(serverError){
        <div class="error">
          <span>{{serverError}}</span>
        </div>
        }
      <div class="text-end">
        <button type="submit" class="forget-password-btn">Confirm</button>
      </div>
    </form>
    }
    @else {
    <div class="title">
      <h4>Forget your Password</h4>
    </div>
    <form class="d-flex flex-column gap-3 w-100" [formGroup]="forgetPasswordForm" (submit)="onForgetPasswordSubmit()">
      <div>
        <input class="w-100" formControlName="phoneNumber" type="text" placeholder="Phone number" appNumberOnly>
        @if(forgetPasswordForm.controls.phoneNumber.hasError('required') &&
        forgetPasswordForm.controls.phoneNumber.dirty &&
        forgetPasswordForm.controls.phoneNumber.touched ){
        <div class="error mt-1">Phone Number is Required</div>
        }
        @else if (forgetPasswordForm.controls.phoneNumber.invalid && forgetPasswordForm.controls.phoneNumber.dirty &&
        forgetPasswordForm.controls.phoneNumber.touched) {
        <div class="error mt-1">Phone Number is Invalid</div>
        }

        @if(serverError){
        <div class="error">
          <span>{{serverError}}</span>
        </div>
        }
        <div class="text-end">
          <button type="submit" class="forget-password-btn">Confirm</button>
        </div>
      </div>
    </form>
    }
  </div>
</div>

}
@else {
<app-verify [phoneNumber]="this.forgetPasswordForm.get('phoneNumber')?.value ??''" [isFromForgetPassword]="true"
  (resetPasswordForm)="isResetPassword=true"></app-verify>
}
