<div class="col-12" [ngClass]="{'col-md-9': !isCart}">
  <form class="card-body  my-0" [ngClass]="{'my-sm-5': !isCart}" [formGroup]="AddressForm" (submit)="onSubmit()">
    <!-- User Name -->
    <div class="mb-3 mt-3">

      <div class="input-group ">
        <input formControlName="username" type="text" class=" userInput form-control" placeholder="User Name"
          aria-label="Username" aria-describedby="basic-addon1">
        <span class="input-group-text iconOfInput" id="basic-addon1">
          <svg width="13" height="16" viewBox="0 0 13 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M6.4017 7.70722C7.43284 7.70722 8.32575 7.32744 9.05533 6.57817C9.78491 5.82905 10.1547 4.91243 10.1547 3.8535C10.1547 2.79488 9.78491 1.87817 9.05521 1.12877C8.32551 0.379747 7.43272 0 6.4017 0C5.37041 0 4.47771 0.379747 3.74816 1.1289C3.01862 1.87805 2.64864 2.79479 2.64864 3.8535C2.64864 4.91243 3.01859 5.82917 3.74829 6.57832C4.47798 7.32735 5.37078 7.70722 6.4017 7.70722ZM12.9685 12.3031C12.9474 11.9914 12.9049 11.6513 12.8422 11.2922C12.779 10.9303 12.6976 10.5883 12.6001 10.2757C12.4994 9.95255 12.3625 9.63349 12.1932 9.32768C12.0175 9.0103 11.8111 8.73393 11.5795 8.50653C11.3373 8.26862 11.0409 8.07734 10.698 7.93778C10.3564 7.79903 9.9777 7.72872 9.5727 7.72872C9.41362 7.72872 9.25981 7.79572 8.96272 7.99434C8.75154 8.13555 8.53974 8.27575 8.32731 8.41497C8.12319 8.54853 7.84667 8.67365 7.50512 8.78693C7.17191 8.89765 6.83358 8.9538 6.49964 8.9538C6.16572 8.9538 5.82749 8.89765 5.49391 8.78693C5.15275 8.67374 4.87623 8.54865 4.67233 8.41509C4.43586 8.25994 4.22192 8.11834 4.03634 7.99419C3.73961 7.79559 3.58565 7.72856 3.42661 7.72856C3.02145 7.72856 2.64295 7.799 2.3014 7.93794C1.95878 8.07722 1.66218 8.2685 1.41978 8.50665C1.18833 8.73418 0.981841 9.0104 0.806363 9.32768C0.637215 9.63346 0.500265 9.95242 0.39944 10.2758C0.302053 10.5884 0.220644 10.9303 0.157404 11.2922C0.0947416 11.6508 0.0521959 11.991 0.0311361 12.3035C0.0101865 12.618 -0.000197456 12.9331 2.84289e-06 13.2483C2.84289e-06 14.0835 0.258564 14.7596 0.768443 15.2583C1.27202 15.7504 1.93833 16 2.74861 16H10.2514C11.0617 16 11.7277 15.7505 12.2314 15.2583C12.7414 14.76 13 14.0838 13 13.2482C12.9999 12.9258 12.9893 12.6078 12.9685 12.3031Z"
              fill="#BABABA" />
          </svg>
        </span>
      </div>
      @if(AddressForm.get('username')?.hasError('required') && AddressForm.get('username')?.dirty &&
      AddressForm.get('username')?.touched ){
      <div class="error mt-2">username is Required</div>
      }
    </div>

    <!-- Email -->
    <!-- <div class="input-group mb-3">
    <input type="text" class="form-control userInput" placeholder="Email" aria-label="Email"
      aria-describedby="basic-addon1">
    <span class="input-group-text iconOfInput" id="basic-addon1">
      <svg width="15" height="12" viewBox="0 0 15 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M13.5 3L7.5 6.75L1.5 3V1.5L7.5 5.25L13.5 1.5V3ZM13.5 0H1.5C0.6675 0 0 0.6675 0 1.5V10.5C0 10.8978 0.158035 11.2794 0.43934 11.5607C0.720644 11.842 1.10218 12 1.5 12H13.5C13.8978 12 14.2794 11.842 14.5607 11.5607C14.842 11.2794 15 10.8978 15 10.5V1.5C15 0.6675 14.325 0 13.5 0Z"
          fill="#BABABA" />
      </svg>
    </span>
  </div> -->

    <!-- Phone Number -->
    <div class="mb-3">
      <div class="input-group ">
        <input type="tel" formControlName="phoneNumber" class="form-control userInput" placeholder="Phone Number"
          aria-label="PhoneNumber" aria-describedby="basic-addon1">
        <span class="input-group-text iconOfInput" id="basic-addon1"><svg width="15" height="13" viewBox="0 0 15 13"
            fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M3.01667 5.62611C4.21667 7.67 6.15 9.34555 8.50833 10.3856L10.3417 8.79667C10.575 8.59444 10.9 8.53667 11.1917 8.61611C12.125 8.88333 13.125 9.02778 14.1667 9.02778C14.3877 9.02778 14.5996 9.10387 14.7559 9.23931C14.9122 9.37475 15 9.55845 15 9.75V12.2778C15 12.4693 14.9122 12.653 14.7559 12.7885C14.5996 12.9239 14.3877 13 14.1667 13C10.4094 13 6.80609 11.7065 4.14932 9.40392C1.49256 7.10139 0 3.97849 0 0.722222C0 0.530677 0.0877973 0.346977 0.244078 0.211534C0.400358 0.076091 0.61232 0 0.833333 0H3.75C3.97101 0 4.18298 0.076091 4.33926 0.211534C4.49554 0.346977 4.58333 0.530677 4.58333 0.722222C4.58333 1.625 4.75 2.49167 5.05833 3.30056C5.15 3.55333 5.08333 3.835 4.85 4.03722L3.01667 5.62611Z"
              fill="#BABABA" />
          </svg>
        </span>
      </div>
      @if(AddressForm.get('phoneNumber')?.hasError('required') && AddressForm.get('phoneNumber')?.dirty &&
      AddressForm.get('phoneNumber')?.touched ){
      <div class="error mt-2">phone number is Required</div>
      }
    </div>


    <!-- Select City & Government -->
    <div class="d-flex input-group mb-3">
      <div class="col-6 pe-3 ">
        <select class="form-select userInput textOfSelectList" aria-label="Default select example"
          formControlName="cityId" (change)="onCityChange()">
          <option value="0">City</option>
          @for (item of city; track $index) {
          <option [value]="item._id">{{item.name}}</option>
          }
        </select>
        @if(
        AddressForm.get('cityId')?.dirty && AddressForm.get('cityId')?.touched && AddressForm.get('cityId')?.value
        =='0' ){
        <div class="error mt-1">city is Required</div>
        }
      </div>
      <div class="col-6">
        <select class="form-select userInput textOfSelectList" aria-label="Default select example"
          formControlName="districtId">
          <option value="0">District</option>
          @for (item of districts; track $index) {
          <option [value]="item.districtId">{{item.districtName}}</option>
          }
        </select>
        @if(
        AddressForm.get('districtId')?.dirty && AddressForm.get('districtId')?.touched &&
        AddressForm.get('districtId')?.value =='0' ){
        <div class="error mt-1">District is Required</div>
        }
      </div>
    </div>

    <!-- Building Number &  apartment number -->
    <div class="d-flex input-group mb-3">
      <div class="col-6 pe-3">
        <input type="text" class="form-control  userApartmentNumber" placeholder="Building Number"
          aria-label="buildingNumber" formControlName="buildingNumber">
        @if(AddressForm.get('buildingNumber')?.hasError('required') &&
        AddressForm.get('buildingNumber')?.dirty && AddressForm.get('buildingNumber')?.touched ){
        <div class="error mt-1">Building Number is Required</div>
        }
      </div>
      <div class="col-6 ">
        <input type="text" class="form-control userApartmentNumber " placeholder="apartment number"
          aria-label="apartment number" formControlName="apartmentNumber">
        @if(AddressForm.get('apartmentNumber')?.hasError('required') &&
        AddressForm.get('apartmentNumber')?.dirty && AddressForm.get('apartmentNumber')?.touched ){
        <div class="error mt-1">Apartment Number is Required</div>
        }
      </div>
    </div>

    <!-- Street -->
    <div class="d-flex input-group mb-3">

      <div class="col-6 pe-3">
        <input type="text" class="form-control userApartmentNumber" formControlName="floorNumber"
          placeholder="floor number" aria-label="floorNumber">
        @if(AddressForm.get('floorNumber')?.hasError('required') &&
        AddressForm.get('floorNumber')?.dirty && AddressForm.get('floorNumber')?.touched ){
        <div class="error mt-1">Floor Number is Required</div>
        }
      </div>
      <div class="col-6">
        <input type="text" class="form-control userApartmentNumber" formControlName="street" placeholder="Street"
          aria-label="street">
        @if(AddressForm.get('street')?.hasError('required') &&
        AddressForm.get('street')?.dirty && AddressForm.get('street')?.touched ){
        <div class="error mt-1">Street is Required</div>
        }@else if (AddressForm.get('street')?.invalid && AddressForm.get('street')?.dirty &&
        AddressForm.get('street')?.touched) {
        <div class="error mt-1">Street must be at least 5 letter</div>
        }
      </div>
    </div>

    <!-- Details -->
    <div class="col input-group " style="height: 88px;">
      <textarea id="txtid" class="form-control userDetails" name="textname" rows="4" formControlName="details"
        maxlength="200" placeholder="Please enter your address here in details"></textarea>
    </div>
    @if(AddressForm.get('details')?.hasError('required') &&
    AddressForm.get('details')?.dirty && AddressForm.get('details')?.touched ){
    <div class="error mt-1">Details is Required</div>
    }
    <div class="col input-group my-3">
      <div class="form-check">
        <input formControlName="defaultAddress" class="form-check-input" type="checkbox" id="flexCheckDefault" [checked]="address?.defaultAddress">
        <label class="form-check-label labelOfSaveCheckbox" for="flexCheckDefault">
          Make this address as default
        </label>
      </div>
    </div>
    @if (!isCart) {
    <div class="d-flex justify-content-md-end justify-content-center pb-3">
      <button type="submit" class="data-btn mt-4 mb-5 ">Save Address</button>
    </div>
  }

  </form>
</div>
